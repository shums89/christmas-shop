(()=>{"use strict";function t(){o(),document.documentElement.classList.remove("menu-open")}let n=!0,r=(e=500)=>{document.documentElement.classList.contains("lock")?o(e):s(e)},o=(e=500)=>{let t=document.querySelector("body");if(n){let r=document.querySelectorAll("[data-lp]");setTimeout((()=>{for(let e=0;e<r.length;e++){r[e].style.paddingRight="0px"}t.style.paddingRight="0px",document.documentElement.classList.remove("lock")}),e),n=!1,setTimeout((function(){n=!0}),e)}},s=(e=500)=>{let t=document.querySelector("body");if(n){let r=document.querySelectorAll("[data-lp]");for(let e=0;e<r.length;e++){r[e].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}t.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",document.documentElement.classList.add("lock"),n=!1,setTimeout((function(){n=!0}),e)}};const c=async function(e){const t=await fetch(e);if(!t.ok)throw new Error(`Ошибка по адресу "${e}", статус ошибки ${t.status}!`);return await t.json()},a=e=>{switch(e=e.toLowerCase()){case"for work":return"purple";case"for health":return"green";case"for harmony":return"pink"}};(()=>{const e=document.querySelector(".slider-slider");if(!e)return;const t=e.querySelector(".slider-slider__wrapper").querySelector(".slider-slider__swiper"),n=e.querySelector(".slider-slider__nav-button_prev"),r=e.querySelector(".slider-slider__nav-button_next");let o=0,s=3,c=0;const a=(e="")=>{switch(e){case"prev":o--;break;case"next":o++}n.disabled=0===o,r.disabled=o===s,t.style.transition="transform 1s ease",t.style.transform=`translateX(${-c*o}px)`},l=()=>{s=window.innerWidth<768?6:3,c=(1990+2*parseFloat(getComputedStyle(t).left)-window.innerWidth)/s,o=0,n.disabled=0===o,r.disabled=o===s,t.style.transition="transform 0s ease",t.style.transform="translateX(0px)"};n.addEventListener("click",(()=>a("prev"))),r.addEventListener("click",(()=>a("next"))),window.addEventListener("resize",l),l()})();(()=>{const e=document.querySelector(".cta__table");if(!e)return;const t=e.querySelector("td#days"),n=e.querySelector("td#hours"),r=e.querySelector("td#minutes"),o=e.querySelector("td#seconds"),s=(new Date).getFullYear()+1;document.querySelector(".slider__title span").textContent=s;const c=new Date(`jan,01,${s},00:00:00`);let a;const l=()=>{const e=(new Date).getTime(),s=(c-e)/1e3,l=parseInt(s/86400),i=s-24*l*60*60,d=parseInt(i/60/60),u=parseInt(i/60%60),m=parseInt(i%60);t.textContent=l,n.textContent=d,r.textContent=u,o.textContent=m,s<=0&&(clearInterval(a),t.textContent=0,n.textContent=0,r.textContent=0,o.textContent=0)};l(),a=setInterval(l,500)})();const l=(e,t)=>(e.innerHTML=`\n        <article class="card" data-name="${t.name}">\n          <a class="card__link" href="#">\n            <div class="card__image-ibg">\n              <picture>\n                <source srcset="img/${t.category.replaceAll(" ","-").toLowerCase()}.webp" type="image/webp">\n                <img src="img/${t.category.replaceAll(" ","-").toLowerCase()}.png" alt="Gift image">\n              </picture>\n            </div>\n            <div class="card__content">\n              <p class="card__category" data-tag-color="${a(t.category)}">${t.category}</p>\n              <h3 class="card__title">${t.name}</h3>\n            </div>\n          </a>\n        </article>\n    `,e);(()=>{const e=document.querySelector(".best__list");if(!e)return;const t=e=>{const t=document.createElement("li");return t.classList.add("best__item"),l(t,e)};c("./files/gifts.json").then((n=>{const r=[],o=n.sort((()=>Math.random()-.5)).slice(-4);for(const e in o)r.push(t(o[e]));e.innerHTML="",e.append(...r)}))})();(()=>{const e=document.querySelector(".gifts-tabs");if(!e)return;const t=e.querySelector(".gifts-tabs__content"),n=e.querySelectorAll('.gifts-tabs__header input[type="radio"]');let r=[];const o=e=>{const t=document.createElement("li");return t.classList.add("gifts-tabs__content-item"),l(t,e)},s=(e="all")=>{let n=[];const s=[];n="all"==(e=e.toLowerCase())?r:r.filter((t=>t.category.toLowerCase()==e));for(const e in n)s.push(o(n[e]));t.innerHTML="",t.append(...s)};c("./files/gifts.json").then((e=>{r=e.sort((()=>Math.random()-.5)),s();for(let e of n)e.addEventListener("change",(e=>{s(e.target.value)}))}))})();const i=document.querySelector(".modal");document.addEventListener("click",(e=>{i.classList.contains("hidden")||e.target.closest(".modal__wrapper")&&!e.target.closest(".modal__btn")||(i.classList.add("hidden"),o())})),document.addEventListener("click",(e=>{const t=e.target.closest(".card");if(!t||!i)return;e.preventDefault();((e,t)=>{c("./files/gifts.json").then((n=>{const r=n.filter((t=>t.name===e))[0];if(r){i.querySelector(".modal__title").textContent=r.name,i.querySelector(".modal__description").textContent=r.description,i.querySelector(".modal__category").textContent=r.category,i.querySelector(".modal__category").dataset.tagColor=a(r.category);for(const[e,t]of Object.entries(r.superpowers))i.querySelector(`.superpower_${e} span`).textContent=parseInt(t),i.querySelector(`.superpower_${e} span`).dataset.superpowerValue=parseInt(t);i.querySelector(".modal__image-ibg img").src=t.src,i.querySelector(".modal__image-ibg img").alt=n.name,i.querySelectorAll(".modal__image-ibg source").forEach((e=>{e.srcset=t.srcset})),i.classList.remove("hidden")}}))})(t.closest("article[data-name]").dataset.name,{srcset:t.querySelector(".card__image-ibg source")?t.querySelector(".card__image-ibg source").srcset:"",src:t.querySelector(".card__image-ibg img").src}),s()}));(()=>{const e=document.querySelector(".button-to-top");if(!e)return;const t=()=>{(window.scrollY||document.documentElement.scrollTop)>300&&window.innerWidth<=768?e.classList.remove("hidden"):e.classList.add("hidden")};e.addEventListener("click",(e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})),window.addEventListener("scroll",t),window.addEventListener("resize",t),t()})();document.querySelectorAll(".menu__link").forEach((e=>e.addEventListener("click",(e=>{e.target.closest(".html-menu")&&e.target.closest(".menu__link_menu")&&e.preventDefault(),t()}))));document.addEventListener("click",(({target:n=e.target})=>{document.documentElement.classList.contains("menu-open")&&!n.closest(".menu__list")&&t()})),function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||document.documentElement.classList.add("no-touch"),window.addEventListener("load",(()=>{const e=document.querySelectorAll("[data-src], [data-srcset], [data-poster]");e&&e.forEach((e=>{e.dataset.src&&(e.src=e.dataset.src),e.dataset.srcset&&(e.srcset=e.dataset.srcset),e.dataset.poster&&(e.poster=e.dataset.poster)}))})),document.querySelector(".icon-menu")&&document.addEventListener("click",(function(e){n&&e.target.closest(".icon-menu")&&(r(),document.documentElement.classList.toggle("menu-open"))}))})();